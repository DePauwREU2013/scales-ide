<!doctype html>
<html>
    <head>
        <title>Gist API</title>
        <!-- Import necessary JavaScript libraries /--> 
        <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
        <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<!--        <script src="//code.jquery.com/jquery-1.10.2.js"></script>-->
        
        <!-- jQuery /-->
        <script type="text/javascript">
            $(document).ready(function() {
                
                // Turn the #editor div into an Ace editor:
                editor = ace.edit('editor');
                editor.setTheme('ace/theme/monokai');
                editor.getSession().setMode('ace/mode/scala');
                
                // Dialog prompt for new project name:
                $('#create-gist').click( function() {
				    $( "#new-dialog" ).dialog({
				        buttons: {
				            "Create": function() {
							
				                // Create an anonymous gist with language set to Scala and
				                // file name set dialog input string:
				                create_gist($('#name').val());
                                $('title').html($('#name').val());
                                $(this).dialog("close");
				            },
                            Cancel: function() {
				                $(this).dialog("close");
                            }
                        }	
                    }); 
                });
                
                            
                // Set resizable Ace editor
                $( "#resizable" ).resizable();
                $("resizable").css({'overflow':'hidden'});
            });
            
            // Create a new Gist with the supplied file name:
            function create_gist(filename) {
		
                function reqListener () {
                    console.log(this.responseText);
                }
                var oReq = new XMLHttpRequest();
                oReq.onload = reqListener;
                oReq.open("post", "https://api.github.com/gists", true);
                oReq.send('{"description": "New Scales Project", "public": "true","files": {"'+filename+'": {"content": "please please"}}}');
            }
        </script>
        <link rel="stylesheet" type="text/css" href="style-ace.css" />
    </head>
    <body>
        <!-- File management buttons /-->
        <div id="file-mgmt">
            <button id="create-gist">New Project</button>
            <button id="open-gist">Open Project</button>
        </div>
        
        <!-- Ace source code editor /--> 	
        <div id="resizable">
            <div id="editor"></div>
        </div>
        
        <!-- Initially invisible components /-->
        <div id='new-dialog' title="New Project...">
            <p>Please enter a name for your project:</p>
            <form>
                <label for="name">
                    <input type="text" name="name" id="name" />
                </label> 
            </form>
        </div>
    </body>
</html>